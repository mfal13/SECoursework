{"version":3,"sources":["index.js"],"names":["express","require","mysql","port","app","set","env","MODE_ENV","db","createConnection","host","process","user","password","get","req","res","render","heading","send","execute","err","rows","fields","console","log","length","params","id","listen","concat"],"mappings":"aACA,IAAMA,QAAUC,QAAQ,WADxBC,MAAAD,QAAA,UAEMC,IAAQD,UAEdE,KAAA,IACAC,IAAMA,IAAG,cAAT,OACAA,IAAMD,IAAI,QAEV,WAEAC,IAAIC,IAAIL,QAAR,OAAiB,WAGjBI,QAAQJ,IAAAA,QAAOM,IAAAC,UAKf,IAAMC,GAAKN,MAAMO,iBAAiB,CAA5BD,KAAKN,QAAMO,IAAAA,eAAiB,YAC9BC,KAAMC,OACNC,SAF8B,WAG9BC,SAAU,UAKdT,IAAIU,IAAI,IAAK,SAACC,EAAKC,GAAfF,EAAIG,OAAK,QACLA,CAAAA,MAAO,gBACPC,QAAA,iBACPd,IAEDU,IAAA,QAAA,SAAAC,EAAAC,GAEIA,EAAIG,KAAK,UAIbf,IAAIU,IAAI,UAAW,SAACC,EAAKC,GAArBF,GAAJM,QAAQ,uBAAyB,SAAAC,EAAAC,EAAAC,GAEzBC,OADDJ,QAAQK,IAARL,YAAAA,OAAQE,EAAwBI,OAAhCN,UACCJ,EAAAG,KAAAG,OAMRlB,IAAIU,IAAI,WAAY,SAAAC,EAAAC,GACdR,GAACY,QAAQ,0BAA2B,SAAAC,EAAAC,EAAAC,GAElC,OADAC,QAAAC,IAAAD,aAAAA,OAAAF,EAAyBA,OAAzBE,UACWL,EAAJA,KAAAG,OAMXlB,IAAAU,IAAA,YAAA,SAAAC,EAAAC,GAEAQ,QAAQC,IAAIV,EAAKC,GAMrBA,EAAAG,KAAA,SAAAJ,EAAAY,OAAAC,MACAxB,IAAIyB,OAAO1B,KAAM,WACbqB,QAAQC,IAAR,0BAAAK,OAAsC3B","file":"index.min.js","sourcesContent":["/* Import dependencies */\r\nconst express = require(\"express\");\r\nconst mysql = require(\"mysql2\");\r\n\r\n/* Create express instance */\r\nconst app = express();\r\nconst port = 3000;\r\n\r\n//Use the pug template engine\r\napp.set(\"view engine\", \"pug\");\r\napp.set(\"views\", \"./views\");\r\n\r\n//Add a static files location\r\napp.use(express.static(\"static\"));\r\n\r\nconsole.log(process.env.MODE_ENV);\r\n\r\n/* Setup database connection */\r\nconst db = mysql.createConnection({\r\n    host: process.env.DATABASE_HOST || \"localhost\",\r\n    user: \"user\",\r\n    password: \"password\",\r\n    database: \"world\",\r\n});\r\n\r\n/* Landing route */\r\napp.get(\"/\", (req, res) => {\r\n    res.render(\"index\",\r\n        { 'title': 'My index page', 'heading': 'My heading' });\r\n});\r\n\r\n// Sample API route\r\napp.get(\"/ping\", (req, res) => {\r\n    res.send(\"pong\");\r\n});\r\n\r\n// Returns an array of cities from the database\r\napp.get(\"/cities\", (req, res) => {\r\n    db.execute(\"SELECT * FROM `city`\", (err, rows, fields) => {\r\n        console.log(`/cities: ${rows.length} rows`);\r\n        return res.send(rows);\r\n    });\r\n});\r\n\r\n// Returns an array countries from the database\r\napp.get(\"/country\", (req, res) => {\r\n    db.execute(\"SELECT * FROM `country`\", (err, rows, fields) => {\r\n        console.log(`/country: ${rows.length} rows`);\r\n        return res.send(rows);\r\n    });\r\n});\r\n\r\n//Dinamic route example\r\napp.get(\"/city/:id\", function (req, res) {\r\n    //req.params contains any parametres in the request\r\n    //We can examinit in the console for debugging purpose\r\n    console.log(req, res);\r\n    //Retrive the name paramentre and use it in a dinamic generated \r\n    res.send(\"Id is \" + req.params.id);\r\n\r\n});\r\n\r\n// Run server!\r\napp.listen(port, () => {\r\n    console.log(`Server running on port ${port}`);\r\n});"]}